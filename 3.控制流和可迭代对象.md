# å†…å®¹ä»‹ç»
- [if/else](#if-elif-else)
- [match/case](#matchcase)
- [forå¾ªç¯å’Œrangeã€enumerateå‡½æ•°](#for%E5%BE%AA%E7%8E%AF%E5%92%8Crangeenumerate%E5%87%BD%E6%95%B0)
- [whileå¾ªç¯](#while%E5%BE%AA%E7%8E%AF)
- [try/except](#tryexcept)
- [withè¯­å¥](#with%E8%AF%AD%E5%8F%A5%E7%AE%80%E5%8C%96%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%92%8C%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86)
- [Iterableå¯è¿­ä»£å¯¹è±¡ã€Iteratorè¿­ä»£å™¨](#iterable%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1%E5%92%8Citerator%E8%BF%AD%E4%BB%A3%E5%99%A8)

## if-elif-else
```python
# è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå˜é‡
some_var = 5

# è¿™æ˜¯ä¸€ä¸ªifè¯­å¥ã€‚
# ç¼©è¿›(Indentation)åœ¨Pythonä¸­å¾ˆé‡è¦ï¼
# æ¯ä¸ªç¼©è¿›é€šå¸¸æ˜¯ç”¨4ä¸ªç©ºæ ¼(Space)ï¼Œè€Œä¸æ˜¯Tabé”®ã€‚
# ä¸‹é¢çš„è¯­å¥æ‰“å°â€œsome_var is smaller than 10â€
if some_var > 10:
    print("some_var is totally bigger than 10.")
elif some_var < 10:    # è¯¥elifå­å¥æ˜¯å¯é€‰çš„ã€‚
    print("some_var is smaller than 10.")
else:                  # elseä¹Ÿæ˜¯å¯é€‰çš„ã€‚
    print("some_var is indeed 10.")
# æ³¨ï¼šä¸åŒäºCè¯­è¨€ï¼ŒPythonä¸­æ²¡æœ‰else ifçš„å†™æ³•ï¼Œåªèƒ½ç”¨ç¼©å†™elifï¼Œå³el(se) + if
```

## match/case
```python
# match/case - åœ¨Python 3.10ä¸­å¼•å…¥
# å°† matchåé¢çš„å€¼ ä¸ å„ä¸ªé€‰é¡¹ æ¯”è¾ƒï¼Œå¹¶æ‰§è¡ŒåŒ¹é…çš„caseå—ã€‚

command = "run"

match command:
    case "run":
        print("The robot started to run ğŸƒâ€â™‚ï¸")
    case "speak" | "say_hi":  # è¿™æ˜¯ å¤šé‡æ¨¡å¼åŒ¹é…ï¼ˆé€»è¾‘â€œæˆ–â€ï¼‰ï¼Œåªè¦æœ‰ä¸€ä¸ªæˆç«‹å°±åŒ¹é…
        print("The robot said hi ğŸ—£ï¸")
    case code if command.isdigit():  # å¸¦å®ˆå«æ¡ä»¶(guard)çš„ caseï¼Œifåæ˜¯é¢å¤–çš„æ¡ä»¶é™åˆ¶ï¼›codeä¼šç»‘å®šcommandçš„å€¼
        print(f"The robot execute code: {code}")
    case _:  # _æ˜¯é€šé…ç¬¦ï¼ˆå°±åƒæ˜¯elseå’ŒCè¯­è¨€ä¸­çš„defaultï¼‰
        print("Invalid command âŒ")
# è¾“å‡ºï¼š"the robot started to run ğŸƒâ€â™‚ï¸"
# å¯¹æ¯”Cè¯­è¨€ä¸­çš„switch/caseï¼š
#   å…³é”®å­—ä¸ºmatch/case
#   ä¸ç”¨ä½¿ç”¨breakï¼Œé˜²æ­¢â€œè´¯ç©¿â€
#   å¯é€‰çš„å…œåº•å…³é”®å­—æ˜¯"_"ï¼Œè€Œä¸æ˜¯"default"
#   ...
```

## forå¾ªç¯å’Œrangeã€enumerateå‡½æ•°
```python
"""
forå¾ªç¯éå†åˆ—è¡¨
æ‰“å°:
    dog is a mammal
    cat is a mammal
    mouse is a mammal
"""
for animal in ["dog", "cat", "mouse"]:
# å¯ä»¥ä½¿ç”¨"format()"æ¥ æ’å€¼(interpolate) æ ¼å¼åŒ–å­—ç¬¦ä¸²
    print("{} is a mammal".format(animal))  # animalåœ¨formatä¸­æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å°†å…¶å†…å®¹æ’å…¥ç¬¬ä¸€ä¸ªèŠ±æ‹¬å·

"""
"range(number)"è¿”å›æ•°å­—çš„å¯è¿­ä»£å¯¹è±¡(iterable)
    è¦æƒ³è¯»å–â€œå¯è¿­ä»£å¯¹è±¡â€ä¸­çš„å†…å®¹ï¼Œå¯ä»¥
        ä½¿ç”¨for-inå¾ªç¯
        ä½¿ç”¨list()å‡½æ•°è½¬åˆ—è¡¨
ä» 0 å¼€å§‹åˆ° ç»™å®šçš„æ•°å­—ï¼Œä½†ä¸åŒ…æ‹¬ç»™å®šçš„æ•°å­—
æ‰“å°:
    0
    1
    2
    3
"""
for i in range(4):
    print(i)
# ç›¸å½“äºCè¯­è¨€ä¸­çš„ï¼š
    # for (int i = 0; i < 4; i++) {
    #     printf("%d\n", i);
    # }

"""
"range(lower, upper)"è¿”å›ä»loweråˆ°upper(ä¸å«)çš„å¯è¿­ä»£å¯¹è±¡
æ‰“å°:
    4
    5
    6
    7
"""
for i in range(4, 8):
    print(i)

"""
"range(lower, upper, step)"
è¿”å›ä»loweråˆ°upper(ä¸å«)çš„å¯è¿­ä»£å¯¹è±¡,
ä¸”æ¯æ¬¡è¿­ä»£æ—¶ï¼Œæ•°å­—å¢åŠ stepã€‚
å¦‚æœstepæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤å€¼ä¸º1ã€‚
æ‰“å°:
    4
    6
"""
for i in range(4, 8, 2):
    print(i)

"""
éå†åˆ—è¡¨ä»¥å–åˆ°æ¯ä¸ªåˆ—è¡¨é¡¹çš„ ç´¢å¼•index å’Œ å€¼valueï¼š
    0 dog
    1 cat
    2 mouse
"""
animals = ["dog", "cat", "mouse"]
for i, value in enumerate(animals):  # ç›¸å½“äºæ¯æ¬¡è¿­ä»£è¿”å›çš„æ˜¯ä¸€ä¸ªå…ƒç»„(index, value)
    print(i, value)
```

## whileå¾ªç¯
```python
"""
whileå¾ªç¯ä¸€ç›´æŒç»­åˆ° æŸä¸ªæ¡ä»¶ä¸å†æ»¡è¶³ï¼Œåˆ™åœæ­¢ã€‚
prints:
    0
    1
    2
    3
"""
x = 0
while x < 4:
    print(x)
    x += 1  # x = x + 1çš„ç®€å†™å½¢å¼(shorthand)
    # æ³¨ï¼šPythonä¸­ä¸æ”¯æŒCè¯­è¨€æä¾›çš„ è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦"++"å’Œ"--"
```

## try/except
> æ³¨ï¼šCè¯­è¨€æ²¡æœ‰å†…å»ºçš„"å¼‚å¸¸å¤„ç†æœºåˆ¶"
```python
# ç”¨ try/exceptå— æ•è·å’Œå¤„ç†å¼‚å¸¸
try:
# ä½¿ç”¨"raise"æ¥å¼•å‘ä¸€ä¸ªé”™è¯¯
    raise IndexError("This is an index error")
except IndexError as e:
    pass                 # å°½é‡é¿å…è¿™ç§å†™æ³•ï¼Œè€Œæ˜¯æä¾›æ¢å¤çš„æ“ä½œï¼ˆä¸‹ä¸€ä¸ªç¤ºä¾‹ï¼‰ã€‚
except (TypeError, NameError):
    pass                 # å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªexceptionã€‚
else:                    # try/exceptçš„å¯é€‰å­å¥ï¼Œå¿…é¡»è·Ÿåœ¨try/exceptä¹‹åã€‚
    print("All good!")   # else ä¸­çš„ä»£ç å½“ä¸”ä»…å½“ try ä¸­æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸æ—¶æ‰ä¼šæ‰§è¡Œã€‚
finally:                 # finally ä¸­çš„ä»£ç åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½è¦æ‰§è¡Œ
    print("We can clean up resources here")
```

## withè¯­å¥ï¼šç®€åŒ–å¼‚å¸¸å¤„ç†å’Œèµ„æºç®¡ç†
Pythonä¸­ï¼Œ`with`è¯­å¥è¢«ç”¨äºç®€åŒ–å¼‚å¸¸å¤„ç†å’Œèµ„æºç®¡ç†ï¼Œç‰¹åˆ«æ˜¯å½“æ¶‰åŠåˆ°éœ€è¦æ˜ç¡®å…³é—­æˆ–æ¸…ç†çš„èµ„æºæ—¶ï¼Œå¦‚**æ–‡ä»¶**ã€**ç½‘ç»œè¿æ¥**æˆ–**æ•°æ®åº“è¿æ¥**ã€‚ 
> é€šè¿‡ä½¿ç”¨`with`è¯­å¥ï¼ŒPythonå¯ä»¥ç¡®ä¿åœ¨ä»£ç å—æ‰§è¡Œå®Œæ¯•åï¼Œç›¸å…³èµ„æºè¢«é€‚å½“åœ°å…³é—­æˆ–é‡Šæ”¾ï¼Œå³ä½¿åœ¨ä»£ç å—ä¸­å‘ç”Ÿäº†å¼‚å¸¸ã€‚
```python
# å¯ä»¥ä½¿ç”¨ withè¯­å¥ï¼Œè€Œä¸æ˜¯try/finallyæ¥è‡ªåŠ¨å¤„ç† èµ„æºå›æ”¶æ¸…ç†
with open("myfile.txt") as f:
    for line in f:
        print(line)

# å†™å…¥æ–‡ä»¶
contents = {"aa": 12, "bb": 21}
with open("myfile1.txt", "w") as file:
    file.write(str(contents))        # å°†dictè½¬stringï¼Œç„¶åå†™å…¥æ–‡ä»¶

import json
with open("myfile2.txt", "w") as file:
    file.write(json.dumps(contents))  # å¦ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿæ˜¯è½¬stringï¼Œç„¶åå†™å…¥æ–‡ä»¶

# ä»æ–‡ä»¶ä¸­è¯»å–
with open("myfile1.txt") as file:
    contents = file.read()           # ä»æ–‡ä»¶ä¸­è¯»å–å­—ç¬¦ä¸²
print(contents)
# æ‰“å°ï¼š{"aa": 12, "bb": 21}

with open("myfile2.txt", "r") as file:
    contents = json.load(file)       # ä»æ–‡ä»¶ä¸­è¯»å–JSONå¯¹è±¡
print(contents)
# æ‰“å°ï¼š{"aa": 12, "bb": 21}
```

## Iterableå¯è¿­ä»£å¯¹è±¡å’ŒIteratorè¿­ä»£å™¨
```python
# Pythonæä¾›äº†ä¸€ä¸ª åŸºæœ¬çš„æŠ½è±¡(fundamental abstraction)ï¼Œç§°ä¸º å¯è¿­ä»£å¯¹è±¡(Iterable)
# iterable æ˜¯ä¸€ä¸ªå¯ä»¥è§†ä¸º åºåˆ—(sequence) çš„å¯¹è±¡
# rangeå‡½æ•°è¿”å›çš„å¯¹è±¡å°±æ˜¯ä¸€ä¸ª å¯è¿­ä»£å¯¹è±¡(Iterable)

filled_dict = {"one": 1, "two": 2, "three": 3}
our_iterable = filled_dict.keys()
print(our_iterable)  # => dict_keys(['one', 'two', 'three'])ã€‚è¿™æ˜¯ä¸€ä¸ªå®ç°äº† å¯è¿­ä»£æ¥å£(Iterable interface)çš„å¯¹è±¡

# æˆ‘ä»¬å¯ä»¥å¾ªç¯éå†(loop over)å®ƒ
for i in our_iterable:
    print(i)  # æ‰“å°one, two, three

# ä½†æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡ç´¢å¼•indexæ¥å®šä½å…ƒç´ elementã€‚
our_iterable[1]  # ä¼šå¼•å‘TypeError

# å¯è¿­ä»£å¯¹è±¡(iterable)æ˜¯ä¸€ä¸ªèƒ½å¦‚ä½•åˆ›å»ºè¿­ä»£å™¨(iterator)çš„å¯¹è±¡
our_iterator = iter(our_iterable)

# è¿­ä»£å™¨å¯ä»¥åœ¨æˆ‘ä»¬éå†æ—¶è®°ä½çŠ¶æ€ã€‚
# ä½¿ç”¨"next()"è·å¾—ä¸‹ä¸€ä¸ªå¯¹è±¡
next(our_iterator)  # =>"one"

# å®ƒåœ¨æˆ‘ä»¬è¿­ä»£æ—¶è®°ä½çŠ¶æ€ã€‚
next(our_iterator)  # =>"two"
next(our_iterator)  # =>"three"

# è¿­ä»£å™¨è¿”å›æ‰€æœ‰æ•°æ®åï¼Œå†æ¬¡ä½¿ç”¨nextä¼šæŠ›å‡ºStopIteration
next(our_iterator)  # å¼•å‘StopIteration

# äº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¾ªç¯å®ƒï¼Œâ€œforâ€éšå«åœ°åšåˆ°äº†è¿™ä¸€ç‚¹ï¼æ³¨ï¼šiterableä¹Ÿå¯ä»¥ä½¿ç”¨"for"å¾ªç¯éå†ã€‚
our_iterator = iter(our_iterable)
for i in our_iterator:
    print(i)  # æ‰“å°one, two, three

# å¯ä»¥é€šè¿‡è°ƒç”¨ list() æ¥è·å– å¯è¿­ä»£å¯¹è±¡ æˆ– è¿­ä»£å™¨ çš„æ‰€æœ‰å…ƒç´ 
list(our_iterable)  # =>è¿”å›["one", "two", "three"]
list(our_iterator)  # =>è¿”å›[]ï¼Œå› ä¸ºour_iteratoréå†ç»“æŸçš„çŠ¶æ€è¢«ä¿å­˜äº†ï¼Œåé¢æ²¡æœ‰å…ƒç´ äº†
```